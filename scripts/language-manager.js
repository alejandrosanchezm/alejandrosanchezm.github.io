class LanguageManager{constructor(){this.currentLanguage="es",this.init()}init(){const e=localStorage.getItem("cvLanguage");e&&["es","en"].includes(e)&&(this.currentLanguage=e),this.setupEventListeners(),this.updateLanguageButton(),this.updateHTMLLang(),this.waitForCVAppAndApplyTranslations()}waitForCVAppAndApplyTranslations(){const e=()=>!!(window.cvApp&&window.CV_DATA&&document.querySelector("#skillsContainer").children.length>0)&&(this.updatePageContent(),!0);e()||("loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>{e()||setTimeout(()=>e(),500)},100)}):setTimeout(()=>{e()||setTimeout(()=>e(),500)},100))}onCVContentLoaded(){this.updatePageContent()}setupEventListeners(){const e=document.getElementById("languageToggle");e&&e.addEventListener("click",()=>{this.toggleLanguage()})}toggleLanguage(){this.currentLanguage="es"===this.currentLanguage?"en":"es",localStorage.setItem("cvLanguage",this.currentLanguage),this.updateLanguageButton(),this.updatePageContent(),this.updateHTMLLang()}updateLanguageButton(){const e=document.getElementById("currentFlag"),t=document.getElementById("currentLang");e&&t&&("es"===this.currentLanguage?(e.textContent="ðŸ‡ªðŸ‡¸",t.textContent="ES"):(e.textContent="ðŸ‡¬ðŸ‡§",t.textContent="EN"))}updateHTMLLang(){(document.getElementById("htmlRoot")||document.documentElement).lang=this.currentLanguage,this.updatePageMetadata()}updatePageMetadata(){const e=window.CV_DATA?window.CV_DATA.personalInfo:null;if(!e)return;document.title=`${e.name} - ${e.title}`;const t=document.querySelector('meta[name="description"]');if(t){const e="es"===this.currentLanguage?"Fullstack Engineer especializado en Python y React. Experiencia en desarrollo web, Big Data y soluciones tecnolÃ³gicas innovadoras.":"Fullstack Engineer specialized in Python and React. Experience in web development, Big Data and innovative technological solutions.";t.setAttribute("content",e)}const n=document.querySelector('meta[property="og:title"]');n&&n.setAttribute("content",`${e.name} - ${e.title}`);const i=document.querySelector('meta[property="og:description"]');if(i){const e="es"===this.currentLanguage?"Fullstack Engineer especializado en Python y React":"Fullstack Engineer specialized in Python and React";i.setAttribute("content",e)}}updatePageContent(){this.updateStaticTexts(),this.updateCVData(),window.cvApp&&(window.cvApp.setLanguage(this.currentLanguage),window.cvApp.renderContent())}updateStaticTexts(){const e=window.translations[this.currentLanguage];e&&(this.updateNavigation(e),this.updateSectionHeaders(e),this.updateContactSection(e),this.updateBehavioralAnalysis(e),this.updatePrivacyBanner(e))}updateNavigation(e){[{href:"#about",key:"about"},{href:"#specialties",key:"specialties"},{href:"#experience",key:"experience"},{href:"#skills",key:"skills"},{href:"#education",key:"education"},{href:"#projects",key:"projects"},{href:"#certifications",key:"certifications"},{href:"#languages",key:"languages"},{href:"#contact",key:"contact"}].forEach(t=>{const n=document.querySelector(`#mobileMenu a[href="${t.href}"]`);if(n&&e[t.key]){const i=n.childNodes[n.childNodes.length-1];i&&i.nodeType===Node.TEXT_NODE&&(i.textContent=e[t.key])}});const t=document.querySelectorAll(".sidebar-item .tooltip"),n=["about","specialties","experience","skills","education","projects","certifications","languages","contact"];t.forEach((t,i)=>{n[i]&&e[n[i]]&&(t.textContent=e[n[i]])})}updateSectionHeaders(e){[{selector:"#specialties .section-header",key:"specialtiesTitle"},{selector:"#experience .section-header",key:"experienceTitle"},{selector:"#skills .section-header",key:"skillsTitle"},{selector:"#education .section-header",key:"educationTitle"},{selector:"#projects .section-header",key:"projectsTitle"},{selector:"#certifications .section-header",key:"certificationsTitle"},{selector:"#languages .section-header",key:"languagesTitle"}].forEach(t=>{const n=document.querySelector(t.selector);n&&e[t.key]&&(n.textContent=e[t.key])})}updateContactSection(e){const t=document.querySelector("#contact h2");t&&e.contactTitle&&(t.textContent=e.contactTitle);const n=document.querySelector("#contact p");n&&e.contactDescription&&(n.textContent=e.contactDescription);const i=document.querySelector('#contact a[href^="mailto:"]');if(i&&e.sendEmail){const t=i.childNodes[i.childNodes.length-1];t&&t.nodeType===Node.TEXT_NODE&&(t.textContent=e.sendEmail)}const o=document.querySelector('#contact a[href^="tel:"]');if(o&&e.call){const t=o.childNodes[o.childNodes.length-1];t&&t.nodeType===Node.TEXT_NODE&&(t.textContent=e.call)}}updateBehavioralAnalysis(e){const t=document.querySelector("#unlockContainer h3");t&&e.behavioralAnalysis&&(t.textContent=e.behavioralAnalysis);const n=document.querySelector("#unlockContainer p");n&&e.behavioralDescription&&(n.textContent=e.behavioralDescription);const i=document.querySelector("#unlockFeaturesBtn span");i&&e.viewBehavioralAnalysis&&(i.textContent=e.viewBehavioralAnalysis);const o=document.querySelector("#privacyNote");o&&e.dataProcessedLocally&&(o.textContent=e.dataProcessedLocally);const s=document.querySelector("#curiosities h2");if(s&&e.whatIKnowAboutYou){const t=s.querySelector("i");t?(s.innerHTML="",s.appendChild(t),s.appendChild(document.createTextNode(e.whatIKnowAboutYou))):s.textContent=e.whatIKnowAboutYou}const c=document.querySelector("#curiosities .relative > div > div > p");c&&e.whatIKnowDescription&&(c.textContent=e.whatIKnowDescription);const a=document.querySelector("#curiosities .font-medium");a&&e.realTimeAnalysis&&(a.textContent=e.realTimeAnalysis);const l=document.querySelector("#curiosities h3");l&&e.interactionPatterns&&(l.textContent=e.interactionPatterns);const d=document.querySelector("#curiosities .flex-1 p");d&&e.interactionDescription&&(d.textContent=e.interactionDescription);const r=document.querySelector("#heatmapBtnText");r&&e.viewHeatmap&&(r.textContent=e.viewHeatmap),document.querySelectorAll("#curiosities button").forEach(t=>{if("Reset"===t.textContent.trim()&&e.reset){const n=t.querySelector("i");n?(t.innerHTML="",t.appendChild(n),t.appendChild(document.createTextNode(e.reset))):t.textContent=e.reset}});const u=document.querySelector("#curiosities h3:nth-of-type(2)");u&&e.temporalAnalysis&&(u.textContent=e.temporalAnalysis);const m=document.querySelector("#curiosities h3:nth-of-type(3)");m&&e.intelligentProfile&&(m.textContent=e.intelligentProfile),document.querySelectorAll("#curiosities .text-sm").forEach(t=>{t.textContent.includes("Analizando")&&e.analyzingBehavior&&(t.textContent=e.analyzingBehavior)}),this.updateDetailedBehavioralElements(e),this.updateSpecificBehavioralElements(e),this.updateTemporalAnalysisElements(e)}updateDetailedBehavioralElements(e){const t=document.querySelector("#technicalProfileTitle");if(t&&e.technicalProfile){const n=t.querySelector("i");n?(t.innerHTML="",t.appendChild(n),t.appendChild(document.createTextNode(e.technicalProfile))):t.textContent=e.technicalProfile}const n=document.querySelector("#behavioralProfileTitle");if(n&&e.behavioralProfile){const t=n.querySelector("i");t?(n.innerHTML="",n.appendChild(t),n.appendChild(document.createTextNode(e.behavioralProfile))):n.textContent=e.behavioralProfile}const i=document.querySelector("#contentAnalysisTitle");if(i&&e.contentAnalysis){const t=i.querySelector("i");t?(i.innerHTML="",i.appendChild(t),i.appendChild(document.createTextNode(e.contentAnalysis))):i.textContent=e.contentAnalysis}const o=document.querySelector("#readingPatternTitle");if(o&&e.readingPattern){const t=o.querySelector("i");t?(o.innerHTML="",o.appendChild(t),o.appendChild(document.createTextNode(e.readingPattern))):o.textContent=e.readingPattern}}updateSpecificBehavioralElements(e){[{selector:"#visualTimelineContainer + div h4",translation:"visualTimeline"},{selector:"#detailedTimeline h4",translation:"detailedHistory"},{selector:"#toggleActivityPanel span",translation:"viewTimeline"},{selector:"#clearActivityData span",translation:"sessionReset"},{selector:"#activitySummary span",translation:"analyzingSession"},{selector:"#toggleIntelligencePanel span",translation:"viewCompleteAnalysis"},{selector:"#interactionCount",translation:"analyzingPatterns"},{selector:"#intelligenceSummary .text-sm",translation:"analyzingBehavior"}].forEach(({selector:t,translation:n})=>{const i=document.querySelector(t);if(i&&e[n]){const t=i.querySelector("i");t?(i.innerHTML="",i.appendChild(t),i.appendChild(document.createTextNode(e[n]))):i.textContent=e[n]}}),document.querySelectorAll("#curiosities button").forEach(t=>{const n=t.textContent.trim();n.includes("Ver Timeline")&&e.viewTimeline||n.includes("View Timeline")&&e.viewTimeline?this.updateButtonText(t,e.viewTimeline):(n.includes("Reset SesiÃ³n")&&e.sessionReset||n.includes("Reset Session")&&e.sessionReset)&&this.updateButtonText(t,e.sessionReset)})}updateButtonText(e,t){const n=e.querySelector("i");n?(e.innerHTML="",e.appendChild(n),e.appendChild(document.createTextNode(t))):e.textContent=t}updateTemporalAnalysisElements(e){const t=document.querySelector("#visualTimelineTitle");if(t&&e.visualTimeline){const n=t.querySelector("i");n?(t.innerHTML="",t.appendChild(n),t.appendChild(document.createTextNode(e.visualTimeline))):t.textContent=e.visualTimeline}const n=document.querySelector("#detailedHistoryTitle");if(n&&e.detailedHistory){const t=n.querySelector("i");t?(n.innerHTML="",n.appendChild(t),n.appendChild(document.createTextNode(e.detailedHistory))):n.textContent=e.detailedHistory}document.querySelectorAll("#activityTimeline .text-xs span").forEach(t=>{const n=t.textContent.trim();"Activo"===n&&e.active||"Active"===n&&e.active?t.textContent=e.active:"Inactivo"===n&&e.inactive||"Inactive"===n&&e.inactive?t.textContent=e.inactive:("Fuera"===n&&e.away||"Away"===n&&e.away)&&(t.textContent=e.away)})}updatePrivacyBanner(e){const t=document.querySelector("#privacyBanner h3");t&&e.privacyTitle&&(t.textContent=e.privacyTitle);const n=document.querySelector("#privacyBanner p");n&&e.privacyDescription&&(n.innerHTML=e.privacyDescription);const i=document.querySelector("#acceptTracking");if(i&&e.allowAnalysis){const t=i.querySelector("span")||i.childNodes[i.childNodes.length-1];t&&(t.nodeType,Node.TEXT_NODE,t.textContent=e.allowAnalysis)}const o=document.querySelector("#declineTracking");if(o&&e.onlyNavigation){const t=o.querySelector("span")||o.childNodes[o.childNodes.length-1];t&&(t.nodeType,Node.TEXT_NODE,t.textContent=e.onlyNavigation)}}updateCVData(){const e=window.cvDataTranslations[this.currentLanguage];e&&window.CV_DATA&&(window.CV_DATA.personalInfo={...window.CV_DATA.personalInfo,...e.personalInfo},window.CV_DATA.summary=e.summary,window.CV_DATA.specialties=e.specialties)}getCurrentLanguage(){return this.currentLanguage}getTranslation(e){const t=window.translations[this.currentLanguage];return t&&t[e]?t[e]:e}getTranslatedCVData(){const e=window.cvDataTranslations[this.currentLanguage];return e&&window.CV_DATA?{...window.CV_DATA,personalInfo:e.personalInfo||window.CV_DATA.personalInfo,summary:e.summary||window.CV_DATA.summary,specialties:e.specialties||window.CV_DATA.specialties,experience:e.experience||window.CV_DATA.experience,education:e.education||window.CV_DATA.education,projects:e.projects||window.CV_DATA.projects,certifications:e.certifications||window.CV_DATA.certifications,languages:e.languages||window.CV_DATA.languages}:window.CV_DATA}}"undefined"!=typeof module&&module.exports&&(module.exports=LanguageManager);